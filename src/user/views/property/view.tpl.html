<?php
/*
 * $Id$
 */

	$features = $property->getFeatures()->getList();
	$pictures = $property->getPictures()->getList();
	$date = $property->getPublished();
?>

<br/>
<div class="container_24">

<?/* ttile */?>
	<div class="g_20">
		<h1><?=$property->getName()?> (#<?=$property->getId()?>)</h1>
	</div>


<?/* published flag */?>
	<div class="g_4 info <?=$date ? null : 'nok'?>">
<?php
	if ($date) {
		echo 'Published: '.$date->toDate();
	} else {
		echo 'Is not published';
	}
?>
	</div>
	<div class="clear"></div>


<?/* main description */?>
	<div class="g_8 infoBlock">
<?php
	$first = true;
	foreach(array(FeatureType::BEDROOMS, FeatureType::TOYLETS, FeatureType::CAR_PLACES) as $typeId) {
?>
		<div class="<?=$first ? 'alpha' : null?>"><?=$features[$typeId]->getValue()?> x <image src="" width="24" height="24" alt='<?=$features[$typeId]->getType()->getName()?>'/></div>
<?php
		$first = false;
	}
?>
	</div>


<?/* main image */?>
	<div class="g_16 gallery">
		<div class="g_16 alpha omega">
			<div class="title"><?=$property->getImage()->getComment()?></div>
		</div>
		<div class="clear"></div>
		<div class="g_16 alpha omega" id="bigPicture">
<?php
	$partViewer->view(
		'_parts/picture',
		Model::create()->
			set('picture', $property->getImage())->
			set('size', ImageSize::big())
	)
?>
		</div>
		<div class="clear"></div>

		
<?/* preview list */?>
		<div class="g_16 alpha omega previewList">
			<ul>
<?php
	$first = true;
	foreach ($pictures as $picture) {
		$class = '';
		
		if ($first)
			$class .= ' alpha';
		
		if ($picture->isMain())
			$class .= ' highlite';
?>
				<li class="<?=$class?>">
<?php
		$partViewer->view(
			'_parts/picture',
			Model::create()->
				set('picture', $picture)->
				set('size', ImageSize::preview())
		);
		
		$first = false;
?>
				</li>
<?php
	}
?>
			</ul>
		</div>
	</div>
		 
</div>

<script type="text/javascript">
	
</script>
